import mysql.connector

def enregistrer_audio_db(nom_fichier_audio, chemin_audio):
    try:
        # Se connecter à la base de données MySQL
        connexion = mysql.connector.connect(
            host="localhost",
            user="root",
            password="Poussin13",
            database="myDiscord"
        )

        curseur = connexion.cursor()

        # Lire le contenu du fichier audio
        with open(chemin_audio, "rb") as fichier_audio:
            contenu_audio = fichier_audio.read()

        # Insérer le contenu du fichier audio dans la base de données
        requete = "INSERT INTO vocal (nom_fichier, contenu_audio) VALUES (%s, %s)"
        valeurs = (nom_fichier_audio, contenu_audio)
        curseur.execute(requete, valeurs)

        # Valider et enregistrer les modifications dans la base de données
        connexion.commit()

        print("Le fichier audio a été enregistré avec succès dans la base de données.")

    except Exception as e:
        print(f"Une erreur s'est produite : {e}")

    finally:
        # Fermer la connexion
        if 'connexion' in locals():
            curseur.close()
            connexion.close()

# Utilisation de la fonction pour enregistrer un message audio dans la base de données
    
    chemin_audio("enregistrement.wav")
